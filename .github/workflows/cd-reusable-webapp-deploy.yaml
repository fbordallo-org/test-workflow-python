---
name: ðŸš€ CD Reusable Webapp Deploy

on:
  workflow_call:
    inputs:
      docker-image:
        description: The Docker image to deploy
        required: true
        type: string
      webapp-name:
        description: The name of the Azure Web App
        required: true
        type: string
      environment:
        description: The environment to deploy to
        required: true
        type: string

jobs:
  deploy:
    name: ðŸš€ Deploy
    runs-on: ubuntu-24.04
    environment: ${{ inputs.environment }}
    steps:
      - name: Deployment Step
        run: |
          echo "Deploying Azure Web App ${{ inputs.webapp-name }} to environment ${{ inputs.environment }} with image ${{ inputs.docker-image }}"

#jobs:
#  deploy:
#    name: ðŸš€ Deploy
#    runs-on: ubuntu-24.04
#    permissions:
#      id-token: write
#      contents: read
#    steps:
#      - name: Azure Login (OIDC)
#        uses: Azure/login@v2.3.0
#        with:
#          client-id: ${{ secrets.AZURE_CLIENT_ID }}
#          tenant-id: ${{ secrets.AZURE_TENANT_ID }}
#          subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
#
#      - name: Deploy to Azure Web App
#        uses: azure/webapps-deploy@v3.0.6
#        with:
#          app-name: ${{ inputs.webapp-name }}
#          images: ${{ inputs.docker-image }}